# Migration `20210830095149-property-likes`

This migration has been generated by luke-h1 at 8/30/2021, 10:51:49 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "PropertyLikes" (
"id" SERIAL,
    "value" INTEGER NOT NULL,
    "creatorId" INTEGER NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "listings" (
"id" SERIAL,
    "user_id" TEXT NOT NULL,
    "image" TEXT NOT NULL,
    "property_type" TEXT NOT NULL,
    "likes" INTEGER NOT NULL DEFAULT 0,
    "likeStatus" INTEGER,
    "latitude" DECIMAL(65,30) NOT NULL,
    "longitude" DECIMAL(65,30) NOT NULL,
    "address" TEXT NOT NULL,
    "bedrooms" INTEGER NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY ("id")
)

CREATE INDEX "listings.userId" ON "listings"("user_id")

ALTER TABLE "PropertyLikes" ADD FOREIGN KEY("creatorId")REFERENCES "listings"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210829145356-rename-house-to-listing..20210830095149-property-likes
--- datamodel.dml
+++ datamodel.dml
@@ -2,26 +2,37 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
+model PropertyLikes {
+  id        Int     @id @default(autoincrement())
+  value     Int
+  author    Listing @relation(fields: [creatorId], references: [id])
+  creatorId Int
+  
+  }
+
+
 model Listing {
-  id Int @id @default(autoincrement())
-  userId String @map(name: "user_id")
-  image String 
-  latitude Float 
-  longitude Float 
-  address String 
-  bedrooms Int 
-  createdAt DateTime @default(now()) @map(name: "created_at")
-  updatedAt DateTime @default(now()) @map(name: "updated_at")
-
+  id           Int      @id @default(autoincrement())
+  userId       String   @map(name: "user_id")
+  image        String
+  propertyType String   @map(name: "property_type")
+  likes        Int      @default(0)
+  likeStatus   Int?
+  latitude     Float
+  longitude    Float
+  address      String
+  bedrooms     Int
+  createdAt    DateTime @default(now()) @map(name: "created_at")
+  updatedAt    DateTime @default(now()) @map(name: "updated_at")
   @@index([userId], name: "listings.userId")
-
   @@map("listings")
-}
+  PropertyLikes PropertyLikes[]
+}
```


